# Базовые команды
## Работа с образами
Контейнеры создаются на основе образов. Для того чтобы запустить на компьютере контейнер, его образ должен быть установлен. 

1. Скачивание образа с удалённого реестра - команда `docker pull`

```bash
$docker pull ubuntu:latest
```

По умолчанию образ ищется на Docker Hub. Для скачивания указывается имя образа, а также через знак двоеточия может быть указан `тег` - версия образа. Если тег не указан, то по умолчанию будет загружена самая последняя версия - __latest__.

2. Посмотреть список установленных на компьютере образов - команда `docker images`. То же самое можно сделать командой `docker image ls`.

3. Удаление образов - `docker rmi <id or name:tag>`.

### Команда `docker image`
Это состовная команда, предоставляющая полный спектр возможностей в работе с образами:
`docker image [build, history, import, inspect, load, ls, prune, pull, push, rm, save, tag]`


## Работа с контейнерами
### Запуск контейнера. Команда `docker run`.
Самый стандартный способ запустить контейнер: `docker run <image name>`

```bash
$docker run ubuntu:latest
```

При этом образу необязательно быть установленным на компьютере. В таком случае образ сначала скачается, и лишь затем будет запущен контейнер.

Другие возможности команды run:
1. `docker run -d <image>` - запуск контейнера в фоновом режиме. Дело в том, что если контейнер запускается через консоль, то по умолчанию консоль прикрепляется к контейнеру, и служит как бы потоком вывода для контейнера. Чтобы снова прикрепить консоль к запущенному контейнеру - команда `docker attach <id or name>`
2. `docker run --name <name> <image>` - задать контейнеру имя при запуске. Иначе оно будет задано случайно.
3. `docker run -it <image>` - запуск контейнера в интерактивном режиме(с возможностью ввода пользователя).
4. `docker run -p <порт хоста>:<порт контейнера> <image>` - проброс портов. Приходящее на порт хоста будет адресоваться порту контейнера.
5. `docker run -v <папка хоста>:<папка контейнера> <image>` - вольюмы, синхронизация папки хоста с папкой контейнера для сохранения данных.

### Другие базовые команды 
1. `docker stop <id or name>` - остановить контейнер
2. `docker start <id or name>` - запустить остановленный контейнер
3. `docker ps` - список запущенных контейнеров
4. `docker ps -a` - список всех контейнеров
5. `docker rm <id or name>` - удаление контейнеров
6. `docker inspect <id or name>` - детальная информация о контейнере
7. `docker logs <id or name>` - вывод логов контейнера
8. `docker commit` - создать образ на основе контейнера

### Полезности
В работающем контейнере можно извне запускать команды. Это делается при помощи `docker exec [options] <container> <command>` - запуск команды внутри контейнера.

Например, полезным может быть такое использование команды exec:
```bash
$docker exec -it <container> bash
```


У команд ps и ls есть опция -q, отвечающая за вывод только id контейнеров. 

Получить список id всех имеющихся на компьютере контейнеров:
```bash
$docker ps -aq
$docker ls -aq
```

Получить список id всех запущенных контейнеров:
```bash
$docker ps -q
```

Пользуясь этим, можно легко останавливать и удалять сразу множество контейнеров:
```bash
$docker stop $(docker ps -q)

$docker rm -f $(docker ps -aq)
```

`-f` - флаг для удаления запущенных контейнеров.
